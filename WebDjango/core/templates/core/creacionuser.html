{% load static %}
<!DOCTYPE html>
<html>
<head>
  <link rel="icon" href="{% static 'core/img/logo.ico' %}">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'core/css/estilo.css' %}">
  <title>Perricompras.cl</title>

</head>

<body>
  <!-- Barra de navegacion -->
  <div class="container-barra">
    <nav class="navbar navbar-expand-lg navbar-light" style="background-image: linear-gradient(45deg, #874da2 0%, #c43a30 100%);">
      <div class="container-fluid">
        <a class="navbar-brand" href="index"><img src="{% static 'core/img/logo1.png' %}" alt="logo" width="50" height="50"></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="index" style="color: white;" >Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="compra" style="color: white;">Articulos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="nosotros" style="color: white;">Sobre Nosotros  </a> 
            </li>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" style="color: white;" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Usuario
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" href="leer">Ver tu cuenta</a></li>
            </ul>
          </li>
          </ul>
        </div>
      </div>
    </nav>
  </div>
  

<br>
<br>
<br>
<br>
<br>

    

<main>
  <form action="/registrarUsuario/" autocomplete="off" class="formulario" id="formulario" method="POST">
    {% csrf_token %}
    <!-- Grupo: Usuario -->
    <div class="formulario__grupo" id="grupo__usuario">
      <label for="usuario" class="formulario__label" style="color: black;">Usuario</label>
      <div class="formulario__grupo-input">
        <input type="text" class="formulario__input" name="usuario" id="usuario" placeholder="Ingresa tu nombre de usuario">
        <i class="formulario__validacion-estado fas fa-times-circle"></i>
      </div>
      <p class="formulario__input-error" style="color: black;">El usuario tiene que ser de 6 a 16 caracteres y solo puede contener numeros, letras y guion bajo.</p>
    </div>

    <!-- Grupo: Nombre -->
    <div class="formulario__grupo" id="grupo__nombre">
      <label for="nombre" class="formulario__label" style="color: black;">Nombre</label>
      <div class="formulario__grupo-input">
        <input type="text" class="formulario__input" name="nombre" id="nombre" placeholder="Ingresa tu nombre ">
        <i class="formulario__validacion-estado fas fa-times-circle"></i>
      </div>
      <p class="formulario__input-error" style="color: black;"> El nombre solo debe contener letras</p>
    </div>

    <!-- Grupo: Contraseña -->
    <div class="formulario__grupo" id="grupo__password">
      <label for="password" class="formulario__label" style="color: black;">Contraseña</label>
      <div class="formulario__grupo-input">
        <input type="password" class="formulario__input" name="password" id="password">
        <i class="formulario__validacion-estado fas fa-times-circle"></i>
      </div>
      <p class="formulario__input-error" style="color: black;">La contraseña debe tener numeros y letras.</p>
    </div>

    <!-- Grupo: Contraseña 2 -->
    <div class="formulario__grupo" id="grupo__password2">
      <label for="password2" class="formulario__label" style="color: black;">Repetir Contraseña</label>
      <div class="formulario__grupo-input">
        <input type="password" class="formulario__input" name="password2" id="password2">
        <i class="formulario__validacion-estado fas fa-times-circle"></i>
      </div>
      <p class="formulario__input-error" style="color: black;">Ambas contraseñas deben ser iguales.</p>
    </div>

    <!-- Grupo: Correo Electronico -->
    <div class="formulario__grupo" id="grupo__correo">
      <label for="correo" class="formulario__label" style="color: black;">Correo Electrónico</label>
      <div class="formulario__grupo-input">
        <input type="email" class="formulario__input" name="correo" id="correo" placeholder="correo@correo.com">
        <i class="formulario__validacion-estado fas fa-times-circle"></i>
      </div>
      <p class="formulario__input-error" style="color: black;">El correo solo puede contener letras, numeros, puntos, guiones y guion bajo.</p>
    </div>

    <!-- Grupo: Teléfono -->
    <div class="formulario__grupo" id="grupo__telefono">
      <label for="telefono" class="formulario__label" style="color: black;">Teléfono</label>
      <div class="formulario__grupo-input">
        <input type="text" class="formulario__input" name="telefono" id="telefono" placeholder="+56812345678">
        <i class="formulario__validacion-estado fas fa-times-circle"></i>
      </div>
      <p class="formulario__input-error" style="color: black;">El numero debe empezar con "+569" o "569" y tener 11 numeros en total</p>
    </div>

    <!-- Grupo: Terminos y Condiciones -->
    <div class="formulario__grupo" id="grupo__terminos" style="color: black;">
      <label class="formulario__label">
        <input class="formulario__checkbox" type="checkbox" name="terminos" id="terminos">
        Acepto los Terminos y Condiciones
      </label>
    </div>

    <div class="formulario__mensaje" id="formulario__mensaje">
      <p><i class="fas fa-exclamation-triangle" style="color: black;"></i> <b>Error:</b> Por favor verifica que las casillas esten rellenadas correctamente. </p>
    </div>

    <div class="form-boton">
      <input type="submit" value="Enviar" class="formulario__btn" >
      <input type="reset" value="Limpiar" class="formulario__btn" onfocus="MessageEvent">
  </form>
</main>

  

  



<!-- Footer -->
<div class="footer">
  <footer>
      <!-- Grid container -->
      <div class="container-fluid">
        <!-- Section: Social media -->
        <section class="mb-4">
          <!-- Facebook -->
          <a class="btn btn-outline-light btn-floating m-1" href="https://www.facebook.com" target="_BLANK" role="button"
            ><img src="{% static 'core/img/Facebook.png' %}" alt="wsp", width="24" height="24"></a>
    
          <!-- Twitter -->
          <a class="btn btn-outline-light btn-floating m-1" href="https://www.twitter.com" target="_BLANK" role="button"
            ><img src="{% static 'core/img/Twitter.png' %}" alt="wsp", width="24" height="24"></a>
    
    
          <!-- Instagram -->
          <a class="btn btn-outline-light btn-floating m-1" href="https://www.instagram.com" target="_BLANK" role="button"
            ><img src="{% static 'core/img/Instagram.png' %}" alt="wsp", width="24" height="24"></a>
  
          <!-- WSP -->
          <a class="btn btn-outline-light btn-floating m-1"  role="button"
            ><img src="{% static 'core/img/Whatsapp.png' %}" alt="wsp", width="24" height="24"></a>
    
        </section>
        <!-- Section: Social media -->
      </div>
      <!-- Grid container -->
    
      <!-- Copyright -->
      <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
          @2022 Copyrigth Derechos reservados Martin Godoy, Cristopher Parada, Carlos Buffo, Matia Godoy
       
      </div>
      <!-- Copyright -->
    </footer>
  </div>
<!-- Footer FIN-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>  
<script src="https://kit.fontawesome.com/2c36e9b7b1.js" crossorigin="anonymous"></script>
<script>
  const formulario = document.getElementById('formulario');
  const inputs = document.querySelectorAll('#formulario input');
  
  const expresiones = {
    usuario: /^[a-zA-Z0-9\_\-]{6,16}$/, // Letras, numeros, guion y guion_bajo
    nombre: /^[a-zA-ZÀ-ÿ\s]{1,40}$/, // Letras y espacios, pueden llevar acentos.
    password: /^.{6,12}$/, // 6 a 12 digitos.
    correo: /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,
    telefono: /^(\+?56)?(\s?)(0?9)(\s?)[98765432]\d{7}$/ // 7 a 14 numeros.
  }
  
  const campos = {
    usuario: false,
    nombre: false,
    password: false,
    correo: false,
    telefono: false
  }
  
  const validarFormulario = (e) => {
    switch (e.target.name) {
      case "usuario":
        validarCampo(expresiones.usuario, e.target, 'usuario');
      break;
      case "nombre":
        validarCampo(expresiones.nombre, e.target, 'nombre');
      break;
      case "password":
        validarCampo(expresiones.password, e.target, 'password');
        validarPassword2();
      break;
      case "password2":
        validarPassword2();
      break;
      case "correo":
        validarCampo(expresiones.correo, e.target, 'correo');
      break;
      case "telefono":
        validarCampo(expresiones.telefono, e.target, 'telefono');
      break;
    }
  }
  
  const validarCampo = (expresion, input, campo) => {
    if(expresion.test(input.value)){
      document.getElementById(`grupo__${campo}`).classList.remove('formulario__grupo-incorrecto');
      document.getElementById(`grupo__${campo}`).classList.add('formulario__grupo-correcto');
      document.querySelector(`#grupo__${campo} i`).classList.add('fa-check-circle');
      document.querySelector(`#grupo__${campo} i`).classList.remove('fa-times-circle');
      document.querySelector(`#grupo__${campo} .formulario__input-error`).classList.remove('formulario__input-error-activo');
      campos[campo] = true;
    } else {
      document.getElementById(`grupo__${campo}`).classList.add('formulario__grupo-incorrecto');
      document.getElementById(`grupo__${campo}`).classList.remove('formulario__grupo-correcto');
      document.querySelector(`#grupo__${campo} i`).classList.add('fa-times-circle');
      document.querySelector(`#grupo__${campo} i`).classList.remove('fa-check-circle');
      document.querySelector(`#grupo__${campo} .formulario__input-error`).classList.add('formulario__input-error-activo');
      campos[campo] = false;
    }
  }
  
  const validarPassword2 = () => {
    const inputPassword1 = document.getElementById('password');
    const inputPassword2 = document.getElementById('password2');
  
    if(inputPassword1.value !== inputPassword2.value){
      document.getElementById(`grupo__password2`).classList.add('formulario__grupo-incorrecto');
      document.getElementById(`grupo__password2`).classList.remove('formulario__grupo-correcto');
      document.querySelector(`#grupo__password2 i`).classList.add('fa-times-circle');
      document.querySelector(`#grupo__password2 i`).classList.remove('fa-check-circle');
      document.querySelector(`#grupo__password2 .formulario__input-error`).classList.add('formulario__input-error-activo');
      campos['password'] = false;
    } else {
      document.getElementById(`grupo__password2`).classList.remove('formulario__grupo-incorrecto');
      document.getElementById(`grupo__password2`).classList.add('formulario__grupo-correcto');
      document.querySelector(`#grupo__password2 i`).classList.remove('fa-times-circle');
      document.querySelector(`#grupo__password2 i`).classList.add('fa-check-circle');
      document.querySelector(`#grupo__password2 .formulario__input-error`).classList.remove('formulario__input-error-activo');
      campos['password'] = true;
    }
  }
  
  inputs.forEach((input) => {
    input.addEventListener('keyup', validarFormulario);
    input.addEventListener('blur', validarFormulario);
  });
  ;</script>
</body>
</html>